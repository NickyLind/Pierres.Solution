@{
  Layout = "_Layout";
}
@using Pierres.Models;
@model List<Pierres.Models.Treat>

<div class="header">Pierre's Sweet and Savory Treats</div>
<div class="subheader">Here's a list of all the treats we have to offer: </div>
@if (Model.Count == 0)
{
  <p>We are currently sold out of everything!</p>
}
else
{
  <ul>
    @foreach (var treat in Model)
    {
      <li>
        <p>@Html.ActionLink($"{treat.Name}", "Details", "Treats", new {id = treat.TreatId })<p>
          @foreach (var flavor in treat.JoinEntities)
          {
            @if (flavor.Flavor.Name != null)
            {
            <text>@Html.ActionLink($"{flavor.Flavor.Name}", "Details", "Flavors", new {id = flavor.FlavorId }) |</text>
            }
          }
          @if (treat.JoinEntities.Count == 0)
          {
            <text>This type of treat has no flavors listed</text>
          }
      </li>
    }
  </ul>
}
<p>@Html.ActionLink("Treats Home", "Index", "Treats")</p>
<p>@Html.ActionLink("Flavors Home", "Index", "Flavors")</p>